{% extends "layout.html" %}

{% block title %}æœ¬å‘¨å®‰æ’ - ç®€ç‰ˆ{% endblock %}

{% block main %}
<div class="container py-4">
    <h2>ğŸ“… æœ¬å‘¨å®‰æ’</h2>
    <a href="/" class="btn btn-outline-secondary mb-3">â† è¿”å›ä»Šæ—¥</a>

    {% for day in week_dates %}
    <div class="card mb-3">
        <div class="card-header">
            <strong>{{ day.weekday }}</strong> - {{ day.date.strftime('%mæœˆ%dæ—¥') }}
            {% if day.is_today %}<span class="badge bg-primary">ä»Šå¤©</span>{% endif %}
        </div>

        <div class="card-body">
            {% set day_events = events_by_day.get(day.date_str, []) %}
            {% if day_events %}
                {% for event in day_events %}
                <div class="border-start ps-3 mb-2">
                    <strong>
                        {% if event.type == 'event' %}ğŸ“…{% else %}ğŸ’°{% endif %}
                        {{ event.title }}
                    </strong>
                    <small class="text-muted ms-2">{{ event.event_time[11:16] }}</small>
                    {% if event.type == 'expense' %}
                    <span class="badge bg-warning float-end">Â¥{{ event.amount }}</span>
                    {% endif %}
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted">ä»Šå¤©æ²¡æœ‰å®‰æ’</p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
